在 Rust 中，`{}`、`{:?}` 和 `{:#?}` 是格式化字符串，用于控制如何打印输出数据结构或变量值。它们的区别如下：

------

### 1. **`{}`**

`{}` 是最常用的格式化占位符，用于打印实现了 `Display` trait 的类型。

- **适用范围**：适用于实现了 `std::fmt::Display` trait 的类型。
- **作用**：通常用于人类可读的格式化输出（"pretty printing"）。

#### 示例

```rust
let y = 1;
println!("{}", y); // 输出：1
```

- 对于 `1`（整数类型），因为整数实现了 `Display`，它会被正常打印。
- 如果尝试用 `{}` 打印未实现 `Display` 的类型，例如结构体，会导致编译错误。

------

### 2. **`{:?}`**

`{:?}` 是用于调试输出的格式化占位符，适用于实现了 `std::fmt::Debug` trait 的类型。

- **适用范围**：适用于实现了 `Debug` trait 的类型。
- **作用**：以调试格式打印内容，通常包括类型字段和更详细的信息。

#### 示例

```rust
#[derive(Debug)]
struct Hecto;

let x = Hecto;
println!("{:?}", x); // 输出：Hecto
```

- `Hecto` 类型派生了 `Debug`，因此可以用 `{:?}` 打印。
- 如果没有实现 `Debug`，使用 `{:?}` 会导致编译错误。

------

### 3. **`{:#?}`**

`{:#?}` 是 `{:?}` 的 "pretty-printed" 调试版本，用于以更清晰、易读的方式输出数据，通常会格式化为多行并带缩进。

- **适用范围**：与 `{:?}` 一样，适用于实现了 `Debug` trait 的类型。
- **作用**：以多行和缩进格式打印内容，适合查看复杂结构。

#### 示例

```rust
#[derive(Debug)]
struct Hecto;

let z = Hecto;
println!("{:#?}", z); // 输出：
                      // Hecto
```

对于更复杂的结构，`{:#?}` 会自动格式化：

```rust
#[derive(Debug)]
struct Complex {
    x: i32,
    y: i32,
}

let c = Complex { x: 42, y: 100 };
println!("{:#?}", c);
// 输出：
// Complex {
//     x: 42,
//     y: 100,
// }
```

------

### 区别总结

| 格式    | 适用范围  | 是否需要 `Debug` | 是否支持格式化输出 | 示例用途                     |
| ------- | --------- | ---------------- | ------------------ | ---------------------------- |
| `{}`    | `Display` | 否               | 否                 | 打印简单类型，如整数或字符串 |
| `{:?}`  | `Debug`   | 是               | 否                 | 打印调试信息                 |
| `{:#?}` | `Debug`   | 是               | 是（多行，缩进）   | 打印复杂结构，易于阅读       |

------

### 代码完整输出分析

以下代码：

```rust
#[derive(Debug)]
struct Hecto;

fn main() {
    let x = Hecto;
    println!("{:?}", x); // 输出：Hecto
    let y = 1;
    println!("{}", y);   // 输出：1
    let z = Hecto;
    println!("{:#?}", z);// 输出：
                         // Hecto
}
```

- `println!("{:?}", x)`：使用调试格式输出，结果为 `Hecto`。
- `println!("{}", y)`：`1` 是整数，实现了 `Display`，输出为 `1`。
- `println!("{:#?}", z)`：使用带缩进的调试格式输出，结果为 `Hecto`（对于简单类型，没有缩进的区别）。

------

**总结**：

- 用 `{}` 打印人类可读的信息。
- 用 `{:?}` 调试复杂的类型。
- 用 `{:#?}` 打印清晰的多行结构。